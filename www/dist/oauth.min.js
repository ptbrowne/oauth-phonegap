!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports={oauthd_url:"https://oauth.io",oauthd_api:"https://oauth.io/api",version:"phonegap-0.2.4",options:{}}},{}],2:[function(a,b,c){"use strict";var d,e,f,g,h;f=a("../config"),g=a("../tools/cookies"),e=a("../tools/cache"),d=a("../tools/url"),h=a("../tools/sha1"),b.exports=function(b,c,i,j){var k,l,m,n,o,p,q;return d=d(c),g.init(f,c),e.init(g,f),m={request:{}},q={},p={},o={execProvidersCb:function(a,b,c){var d,e;if(p[a]){d=p[a],delete p[a];for(e in d)d[e](b,c)}},getDescription:function(a,b,c){return b=b||{},"object"==typeof q[a]?c(null,q[a]):(q[a]||o.fetchDescription(a),b.wait?(p[a]=p[a]||[],void p[a].push(c)):c(null,{}))}},f.oauthd_base=d.getAbsUrl(f.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0],k=[],l=void 0,(n=function(){var a,b;b=/[\\#&]oauthio=([^&]*)/.exec(c.location.hash),b&&(c.location.hash=c.location.hash.replace(/&?oauthio=[^&]*/,""),l=decodeURIComponent(b[1].replace(/\+/g," ")),a=g.readCookie("oauthio_state"),a&&(k.push(a),g.eraseCookie("oauthio_state")))})(),b.location_operations={reload:function(){return c.location.reload()},getHash:function(){return c.location.hash},setHash:function(a){return c.location.hash=a},changeHref:function(a){return c.location.href=a}},function(c){var g;g=function(c){m.request=a("./oauthio_requests")(c,f,k,e,o),o.fetchDescription=function(a){q[a]||(q[a]=!0,b.$.ajax({url:f.oauthd_api+"/providers/"+a,data:{extend:!0},dataType:"json"}).done(function(b){q[a]=b.data,o.execProvidersCb(a,null,b.data)}).always(function(){"object"!=typeof q[a]&&(delete q[a],o.execProvidersCb(a,new Error("Unable to fetch request description")))}))}},null==c.OAuth&&(c.OAuth={initialize:function(a,b){var c;if(f.key=a,b)for(c in b)f.options[c]=b[c]},setOAuthdURL:function(a){f.oauthd_url=a,f.oauthd_base=d.getAbsUrl(f.oauthd_url).match(/^.{2,5}:\/\/[^/]+/)[0]},getVersion:function(){return f.version},create:function(a,b,d){var f,g,h,i;if(!b)return e.tryCache(c.OAuth,a,!0);"object"!=typeof d&&o.fetchDescription(a),g=function(c){return m.request.mkHttp(a,b,d,c)},h=function(c,e){return m.request.mkHttpEndpoint(a,b,d,c,e)},i={};for(f in b)i[f]=b[f];return i.get=g("GET"),i.post=g("POST"),i.put=g("PUT"),i.patch=g("PATCH"),i.del=g("DELETE"),i.me=m.request.mkHttpMe(a,b,d,"GET"),i},popup:function(a,d,g){var i,j,l,n,o,p,q;return l=function(a){if(a.origin===f.oauthd_base){try{p.close()}catch(b){}return d.data=a.data,m.request.sendCallback(d,i)}},p=void 0,j=void 0,q=void 0,i=b.$.Deferred(),d=d||{},f.key?(2===arguments.length&&"function"==typeof d&&(g=d,d={}),e.cacheEnabled(d.cache)&&(n=e.tryCache(c.OAuth,a,d.cache))?(null!=i&&i.resolve(n),g?g(null,n):i.promise()):(d.state||(d.state=h.create_hash(),d.state_type="client"),k.push(d.state),o=f.oauthd_url+"/auth/"+a+"?k="+f.key,o+="&redirect_uri=http%3A%2F%2Flocalhost",d&&(o+="&opts="+encodeURIComponent(JSON.stringify(d))),d.provider=a,d.cache=d.cache,q=setTimeout(function(){null!=i&&i.reject(new Error("Authorization timed out")),d.callback&&"function"==typeof d.callback&&d.callback(new Error("Authorization timed out"));try{p.close()}catch(a){}},12e5),p=b.open(o,"_blank","toolbar=yes,closebuttoncaption=Back,presentationstyle=formsheet,toolbarposition=top,clearsessioncache=yes,clearcache=yes"),p.addEventListener("loadstart",function(b){var c;"http://localhost/"===b.url.substr(0,17)&&(q&&clearTimeout(q),c=/[\\#&]oauthio=([^&]*)/.exec(b.url),p.close(),c&&c[1]?(d.data=decodeURIComponent(c[1].replace(/\+/g," ")),d.callback=g,d.provider=a,m.request.sendCallback(d,i)):(d.callback&&"function"==typeof d.callback&&d.callback(new Error("unable to receive token")),null!=i&&i.reject(new Error("unable to receive token"))))}),p.addEventListener("exit",function(){return null!=i&&i.reject(new Error("The popup was closed")),d.callback&&"function"==typeof d.callback?d.callback(new Error("The popup was closed")):void 0}),null!=i?i.promise():void 0)):(null!=i&&i.reject(new Error("OAuth object must be initialized")),null==g?void 0:g(new Error("OAuth object must be initialized")))},clearCache:function(a){e.clearCache(a)},http_me:function(a){m.request.http_me&&m.request.http_me(a)},http:function(a){m.request.http&&m.request.http(a)}},g(i))}}},{"../config":1,"../tools/cache":5,"../tools/cookies":6,"../tools/sha1":7,"../tools/url":8,"./oauthio_requests":3}],3:[function(a,b,c){var d,e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=a("../tools/url")(),b.exports=function(a,b,c,f,g){return{http:function(c){var f,h,i,j,k;i=function(){var c,f,g,h;if(h=k.oauthio.request||{},!h.cors){k.url=encodeURIComponent(k.url),"/"!==k.url[0]&&(k.url="/"+k.url),k.url=b.oauthd_url+"/request/"+k.oauthio.provider+k.url,k.headers=k.headers||{},k.headers.oauthio="k="+b.key,k.oauthio.tokens.oauth_token&&k.oauthio.tokens.oauth_token_secret&&(k.headers.oauthio+="&oauthv=1");for(f in k.oauthio.tokens)k.headers.oauthio+="&"+encodeURIComponent(f)+"="+encodeURIComponent(k.oauthio.tokens[f]);return delete k.oauthio,a.ajax(k)}if(k.oauthio.tokens){if(k.oauthio.tokens.access_token&&(k.oauthio.tokens.token=k.oauthio.tokens.access_token),k.url.match(/^[a-z]{2,16}:\/\//)||("/"!==k.url[0]&&(k.url="/"+k.url),k.url=h.url+k.url),k.url=d.replaceParam(k.url,k.oauthio.tokens,h.parameters),h.query){g=[];for(c in h.query)g.push(encodeURIComponent(c)+"="+encodeURIComponent(d.replaceParam(h.query[c],k.oauthio.tokens,h.parameters)));e.call(k.url,"?")>=0?k.url+="&"+g:k.url+="?"+g}if(h.headers){k.headers=k.headers||{};for(c in h.headers)k.headers[c]=d.replaceParam(h.headers[c],k.oauthio.tokens,h.parameters)}return delete k.oauthio,a.ajax(k)}},k={},j=void 0;for(j in c)k[j]=c[j];return k.oauthio.request&&k.oauthio.request!==!0?i():(h={wait:!!k.oauthio.request},f=null!=a?a.Deferred():void 0,g.getDescription(k.oauthio.provider,h,function(a,b){return a?null!=f?f.reject(a):void 0:(k.oauthio.tokens.oauth_token&&k.oauthio.tokens.oauth_token_secret?k.oauthio.request=b.oauth1&&b.oauth1.request:k.oauthio.request=b.oauth2&&b.oauth2.request,void(null!=f&&f.resolve()))}),null!=f?f.then(i):void 0)},http_me:function(c){var d,e,f,h,i;f=function(){var c,d,e,f;c=null!=a?a.Deferred():void 0,f=i.oauthio.request||{},i.url=b.oauthd_url+"/auth/"+i.oauthio.provider+"/me",i.headers=i.headers||{},i.headers.oauthio="k="+b.key,i.oauthio.tokens.oauth_token&&i.oauthio.tokens.oauth_token_secret&&(i.headers.oauthio+="&oauthv=1");for(d in i.oauthio.tokens)i.headers.oauthio+="&"+encodeURIComponent(d)+"="+encodeURIComponent(i.oauthio.tokens[d]);return delete i.oauthio,e=a.ajax(i),a.when(e).done(function(a){null!=c&&c.resolve(a.data)}).fail(function(a){a.responseJSON?null!=c&&c.reject(a.responseJSON.data):null!=c&&c.reject(new Error("An error occured while trying to access the resource"))}),null!=c?c.promise():void 0},i={};for(h in c)i[h]=c[h];return i.oauthio.request&&i.oauthio.request!==!0?f():(e={wait:!!i.oauthio.request},d=null!=a?a.Deferred():void 0,g.getDescription(i.oauthio.provider,e,function(a,b){return a?null!=d?d.reject(a):void 0:(i.oauthio.tokens.oauth_token&&i.oauthio.tokens.oauth_token_secret?i.oauthio.request=b.oauth1&&b.oauth1.request:i.oauthio.request=b.oauth2&&b.oauth2.request,void(null!=d&&d.resolve()))}),null!=d?d.then(f):void 0)},mkHttp:function(a,b,c,d){var e;return e=this,function(f,g){var h,i;if(i={},"string"==typeof f){if("object"==typeof g)for(h in g)i[h]=g[h];i.url=f}else if("object"==typeof f)for(h in f)i[h]=f[h];return i.type=i.type||d,i.oauthio={provider:a,tokens:b,request:c},e.http(i)}},mkHttpMe:function(a,b,c,d){var e;return e=this,function(f){var g;return g={},g.type=g.type||d,g.oauthio={provider:a,tokens:b,request:c},g.data=g.data||{},g.data.filter=f?f.join(","):void 0,e.http_me(g)}},sendCallback:function(a,b){var d,e,g,h,i,j,k,l,m;d=this,e=void 0,h=void 0;try{e=JSON.parse(a.data)}catch(n){return g=n,null!=b&&b.reject(new Error("Error while parsing result")),a.callback(new Error("Error while parsing result"))}if(e&&e.provider){if(a.provider&&e.provider.toLowerCase()!==a.provider.toLowerCase())return h=new Error("Returned provider name does not match asked provider"),null!=b&&b.reject(h),a.callback&&"function"==typeof a.callback?a.callback(h):void 0;if("error"===e.status||"fail"===e.status)return h=new Error(e.message),h.body=e.data,null!=b&&b.reject(h),a.callback&&"function"==typeof a.callback?a.callback(h):void 0;if("success"!==e.status||!e.data)return h=new Error,h.body=e.data,null!=b&&b.reject(h),a.callback&&"function"==typeof a.callback?a.callback(h):void 0;if(!e.state||-1===c.indexOf(e.state))return null!=b&&b.reject(new Error("State is not matching")),a.callback&&"function"==typeof a.callback?a.callback(new Error("State is not matching")):void 0;if(a.provider||(e.data.provider=e.provider),l=e.data,f.cacheEnabled(a.cache)&&l&&f.storeCache(e.provider,l),k=l.request,delete l.request,m=void 0,l.access_token?m={access_token:l.access_token}:l.oauth_token&&l.oauth_token_secret&&(m={oauth_token:l.oauth_token,oauth_token_secret:l.oauth_token_secret}),!k)return null!=b&&b.resolve(l),a.callback&&"function"==typeof a.callback?a.callback(null,l):void 0;if(k.required)for(i in k.required)m[k.required[i]]=l[k.required[i]];return j=function(a){return d.mkHttp(e.provider,m,k,a)},l.get=j("GET"),l.post=j("POST"),l.put=j("PUT"),l.patch=j("PATCH"),l.del=j("DELETE"),l.me=d.mkHttpMe(e.provider,m,k,"GET"),null!=b&&b.resolve(l),a.callback&&"function"==typeof a.callback?a.callback(null,l):void 0}}}}},{"../tools/url":8}],4:[function(a,b,c){var d;(d=a("./lib/oauth")(window,document,window.$,navigator))(window||this)},{"./lib/oauth":2}],5:[function(a,b,c){b.exports={init:function(a,b){return this.config=b,this.cookies=a},tryCache:function(a,b,c){var d,e,f;if(this.cacheEnabled(c)){try{c=JSON.parse(window.localStorage.getItem("oauthio_provider_"+b))}catch(g){d=g,c=!1}if(c=c&&c.date>=(new Date).getTime()?c.value:!1,!c)return!1;c=decodeURIComponent(c)}if("string"==typeof c)try{c=JSON.parse(c)}catch(g){return d=g,!1}if("object"==typeof c){f={};for(e in c)"request"!==e&&"function"!=typeof c[e]&&(f[e]=c[e]);return a.create(b,f,c.request)}return!1},clearCache:function(a){var b,c,d;if(null!=a)return window.localStorage.removeItem("oauthio_provider_"+a);try{b=JSON.parse(window.localStorage.getItem("oauthio_cached_providers"))}catch(e){c=e,b={}}b=b||{};for(d in b)b[d]&&(b[d]=!1,window.localStorage.removeItem("oauthio_provider_"+d));return window.localStorage.setItem("oauthio_cached_providers",JSON.stringify(b))},storeCache:function(a,b){var c,d,e;e=1e3*b.expires_in-1e4||36e6,window.localStorage.setItem("oauthio_provider_"+a,JSON.stringify({value:encodeURIComponent(JSON.stringify(b)),date:(new Date).getTime()+e}));try{c=JSON.parse(window.localStorage.getItem("oauthio_cached_providers"))}catch(f){d=f,c={}}c=c||{},c[a]=!0,window.localStorage.setItem("oauthio_cached_providers",JSON.stringify(c))},cacheEnabled:function(a){return"undefined"==typeof a?this.config.options.cache:a}}},{}],6:[function(a,b,c){b.exports={init:function(a,b){return this.config=a,this.document=b},createCookie:function(a,b,c){var d;this.eraseCookie(a),d=new Date,d.setTime(d.getTime()+1e3*(c||1200)),c="; expires="+d.toGMTString(),this.document.cookie=a+"="+b+c+"; path=/"},readCookie:function(a){var b,c,d,e;for(e=a+"=",c=this.document.cookie.split(";"),d=0;d<c.length;){for(b=c[d];" "===b.charAt(0);)b=b.substring(1,b.length);if(0===b.indexOf(e))return b.substring(e.length,b.length);d++}return null},eraseCookie:function(a){var b;b=new Date,b.setTime(b.getTime()-864e5),this.document.cookie=a+"=; expires="+b.toGMTString()+"; path=/"}}},{}],7:[function(a,b,c){var d,e;e=0,d="",b.exports={hex_sha1:function(a){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(a)))},b64_sha1:function(a){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(a)))},any_sha1:function(a,b){return this.rstr2any(this.rstr_sha1(this.str2rstr_utf8(a)),b)},hex_hmac_sha1:function(a,b){return this.rstr2hex(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},b64_hmac_sha1:function(a,b){return this.rstr2b64(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},any_hmac_sha1:function(a,b,c){return this.rstr2any(this.rstr_hmac_sha1(this.str2rstr_utf8(a),this.str2rstr_utf8(b)),c)},sha1_vm_test:function(){return"a9993e364706816aba3e25717850c26c9cd0d89d"===thishex_sha1("abc").toLowerCase()},rstr_sha1:function(a){return this.binb2rstr(this.binb_sha1(this.rstr2binb(a),8*a.length))},rstr_hmac_sha1:function(a,b){var c,d,e,f,g;for(c=this.rstr2binb(a),c.length>16&&(c=this.binb_sha1(c,8*a.length)),f=Array(16),g=Array(16),e=0;16>e;)f[e]=909522486^c[e],g[e]=1549556828^c[e],e++;return d=this.binb_sha1(f.concat(this.rstr2binb(b)),512+8*b.length),this.binb2rstr(this.binb_sha1(g.concat(d),672))},rstr2hex:function(a){var b,c,d,f,g;try{}catch(h){b=h,e=0}for(c=e?"0123456789ABCDEF":"0123456789abcdef",f="",g=void 0,d=0;d<a.length;)g=a.charCodeAt(d),f+=c.charAt(g>>>4&15)+c.charAt(15&g),d++;return f},rstr2b64:function(a){var b,c,e,f,g,h,i;try{}catch(j){b=j,d=""}for(h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="",f=a.length,c=0;f>c;){for(i=a.charCodeAt(c)<<16|(f>c+1?a.charCodeAt(c+1)<<8:0)|(f>c+2?a.charCodeAt(c+2):0),e=0;4>e;)g+=8*c+6*e>8*a.length?d:h.charAt(i>>>6*(3-e)&63),e++;c+=3}return g},rstr2any:function(a,b){var c,d,e,f,g,h,i,j,k;for(d=b.length,j=Array(),f=void 0,h=void 0,k=void 0,i=void 0,c=Array(Math.ceil(a.length/2)),f=0;f<c.length;)c[f]=a.charCodeAt(2*f)<<8|a.charCodeAt(2*f+1),f++;for(;c.length>0;){for(i=Array(),k=0,f=0;f<c.length;)k=(k<<16)+c[f],h=Math.floor(k/d),k-=h*d,(i.length>0||h>0)&&(i[i.length]=h),f++;j[j.length]=k,c=i}for(g="",f=j.length-1;f>=0;)g+=b.charAt(j[f]),f--;for(e=Math.ceil(8*a.length/(Math.log(b.length)/Math.log(2))),f=g.length;e>f;)g=b[0]+g,f++;return g},str2rstr_utf8:function(a){var b,c,d,e;for(c="",b=-1,d=void 0,e=void 0;++b<a.length;)d=a.charCodeAt(b),e=b+1<a.length?a.charCodeAt(b+1):0,d>=55296&&56319>=d&&e>=56320&&57343>=e&&(d=65536+((1023&d)<<10)+(1023&e),b++),127>=d?c+=String.fromCharCode(d):2047>=d?c+=String.fromCharCode(192|d>>>6&31,128|63&d):65535>=d?c+=String.fromCharCode(224|d>>>12&15,128|d>>>6&63,128|63&d):2097151>=d&&(c+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|63&d));return c},str2rstr_utf16le:function(a){var b,c;for(c="",b=0;b<a.length;)c+=String.fromCharCode(255&a.charCodeAt(b),a.charCodeAt(b)>>>8&255),b++;return c},str2rstr_utf16be:function(a){var b,c;for(c="",b=0;b<a.length;)c+=String.fromCharCode(a.charCodeAt(b)>>>8&255,255&a.charCodeAt(b)),b++;return c},rstr2binb:function(a){var b,c;for(c=Array(a.length>>2),b=0;b<c.length;)c[b]=0,b++;for(b=0;b<8*a.length;)c[b>>5]|=(255&a.charCodeAt(b/8))<<24-b%32,b+=8;return c},binb2rstr:function(a){var b,c;for(c="",b=0;b<32*a.length;)c+=String.fromCharCode(a[b>>5]>>>24-b%32&255),b+=8;return c},binb_sha1:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b,p=Array(80),c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=-1009589776,h=0;h<a.length;){for(j=c,k=d,l=e,m=f,n=g,i=0;80>i;)16>i?p[i]=a[h+i]:p[i]=this.bit_rol(p[i-3]^p[i-8]^p[i-14]^p[i-16],1),o=this.safe_add(this.safe_add(this.bit_rol(c,5),this.sha1_ft(i,d,e,f)),this.safe_add(this.safe_add(g,p[i]),this.sha1_kt(i))),g=f,f=e,e=this.bit_rol(d,30),d=c,c=o,i++;c=this.safe_add(c,j),d=this.safe_add(d,k),e=this.safe_add(e,l),f=this.safe_add(f,m),g=this.safe_add(g,n),h+=16}return Array(c,d,e,f,g)},sha1_ft:function(a,b,c,d){return 20>a?b&c|~b&d:40>a?b^c^d:60>a?b&c|b&d|c&d:b^c^d},sha1_kt:function(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514},safe_add:function(a,b){var c,d;return c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16),d<<16|65535&c},bit_rol:function(a,b){return a<<b|a>>>32-b},create_hash:function(){var a;return a=this.b64_sha1((new Date).getTime()+":"+Math.floor(9999999*Math.random())),a.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}}},{}],8:[function(a,b,c){b.exports=function(a){return{getAbsUrl:function(b){var c;return b.match(/^.{2,5}:\/\//)?b:"/"===b[0]?a.location.protocol+"//"+a.location.host+b:(c=a.location.protocol+"//"+a.location.host+a.location.pathname,"/"!==c[c.length-1]&&"#"!==b[0]?c+"/"+b:c+b)},replaceParam:function(a,b,c){return a=a.replace(/\{\{(.*?)\}\}/g,function(a,c){return b[c]||""}),c&&(a=a.replace(/\{(.*?)\}/g,function(a,b){return c[b]||""})),a}}}},{}]},{},[4]);